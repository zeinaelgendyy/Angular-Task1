<div class="form-wrapper">
  <div class="form-card">
    <h2 class="form-title">
      {{ isEditMode ? 'Edit Book' : 'Add New Book' }}
    </h2>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-grid">

        <div class="form-group">
          <label for="title">Title</label>
          <input
            id="title"
            formControlName="title"
            placeholder="Enter book title"
            [attr.aria-invalid]="form.get('title')?.invalid && form.get('title')?.touched"
            aria-describedby="title-error"
          />
          <small class="error" id="title-error" *ngIf="form.get('title')?.invalid && form.get('title')?.touched">
            Title is required.
          </small>
        </div>

        <div class="form-group">
          <label for="author">Author</label>
          <input
            id="author"
            formControlName="author"
            placeholder="Enter author name"
            [attr.aria-invalid]="form.get('author')?.invalid && form.get('author')?.touched"
            aria-describedby="author-error"
          />
          <small class="error" id="author-error" *ngIf="form.get('author')?.invalid && form.get('author')?.touched">
            Author is required.
          </small>
        </div>

        <div class="form-group">
          <label for="genre">Genre</label>
          <input
            id="genre"
            formControlName="genre"
            placeholder="e.g. Fantasy, Drama"
            [attr.aria-invalid]="form.get('genre')?.invalid && form.get('genre')?.touched"
            aria-describedby="genre-error"
          />
          <small class="error" id="genre-error" *ngIf="form.get('genre')?.invalid && form.get('genre')?.touched">
            Genre is required.
          </small>
        </div>

        <div class="form-group">
          <label for="year">Year</label>
          <input
            type="number"
            id="year"
            formControlName="year"
            placeholder="YYYY"
            [attr.aria-invalid]="form.get('year')?.invalid && form.get('year')?.touched"
            aria-describedby="year-error"
          />
          <small class="error" id="year-error" *ngIf="form.get('year')?.invalid && form.get('year')?.touched">
            Enter a valid 4-digit year.
          </small>
        </div>

        <div class="form-group">
          <label for="price">Price (USD)</label>
          <input
            type="number"
            step="0.01"
            id="price"
            formControlName="price"
            placeholder="0.00"
            [attr.aria-invalid]="form.get('price')?.invalid && form.get('price')?.touched"
            aria-describedby="price-error"
          />
          <small class="error" id="price-error" *ngIf="form.get('price')?.invalid && form.get('price')?.touched">
            Price must be zero or more and a valid number.
          </small>
        </div>

        <div class="form-group full-width">
          <label for="imageUrl">Image URL</label>
          <input
            id="imageUrl"
            formControlName="imageUrl"
            placeholder="https://..."
            [attr.aria-invalid]="form.get('imageUrl')?.invalid && form.get('imageUrl')?.touched"
            aria-describedby="imageUrl-error"
          />
          <small class="error" id="imageUrl-error" *ngIf="form.get('imageUrl')?.invalid && form.get('imageUrl')?.touched">
            Image URL is required.
          </small>
        </div>

        <div class="form-group full-width">
          <label for="description">Description</label>
          <textarea
            id="description"
            formControlName="description"
            placeholder="Brief description"
          ></textarea>
        </div>
      </div>

      <div class="form-actions">
        <button
          type="submit"
          [disabled]="form.invalid"
          [attr.aria-disabled]="form.invalid"
        >
          {{ isEditMode ? 'Update Book' : 'Add Book' }}
        </button>

        <button
          *ngIf="isEditMode"
          type="button"
          class="btn-delete"
          (click)="onDelete()"
        >
          Delete Book
        </button>
      </div>
    </form>
  </div>
</div>
